<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tab.html">

<link rel="import" href="../bower_components/baselib/baselib.html">

<link rel="import" href="../bower_components/polymer-fx/fx-page.html">
<link rel="import" href="../bower_components/polymer-fx/fx-common-behavior.html">

<link rel="import" href="shared-styles.html">
<link rel="import" href="torque-swipe-behavior.html">

<dom-module id="page-about">
  <template>
    <style include="shared-styles">
      @media (min-width: 960px) {
        :host {
          display: block;
          padding-top: 24px;
        }
      }

      paper-tabs.view-selector {
        --paper-tabs: {
          background-color: var(--app-primary-color);
          color: white;
        }
      }
    </style>

    <div class="std-page layout vertical" id="wrapper">

      <paper-tabs id="main-view-selector" class="view-selector" selected="{{paperTabSelectedViewIndex}}" fit-container>
        <paper-tab>About</paper-tab>
        <paper-tab>TOS/Privacy</paper-tab>
        <paper-tab>Contact Us</paper-tab>
      </paper-tabs>

      <template is="dom-if" if="[[$equals(paperTabSelectedViewIndex, 0)]]">

        <div class="card">
          <div>This project is created and maintained by
            <a href="https://ishafayet.me">Sayem Shafayet</a> and
            <a href="https://ishafayet.me">Mujtaba Nowshad</a>
          </div>
          <br>
          <br>
          <div>
            <span class="grey">logo and favicon icon made by
              <a href="https://www.flaticon.com/authors/madebyoliver">Madebyoliver</a> from www.flaticon.com </span>
          </div>
          <br>
          <div>
            <br>&copy; 2017. Sayem Shafayet.
            <br> All rights reserved.
            <br>
          </div>
        </div>

      </template>

      <template is="dom-if" if="[[$equals(paperTabSelectedViewIndex, 1)]]">
        <div class="card">
          <div>Coming Soon</div>
          <br>
        </div>
      </template>

      <template is="dom-if" if="[[$equals(paperTabSelectedViewIndex, 2)]]">
        <div class="card">
          <div>
            Send your questions, complaints and praises to [[contactEmail]].
          </div>
          <br>
          <div>
            If you are a fellow developer/investor and want to come over to torque office for a cup of espresso, feel free to drop a
            note to [[contactEmail]] with your contact information and I'll get in touch.
          </div>
          <br>
        </div>
      </template>

  </template>

  <script>
    class PageAbout extends FxPage.mixin(TorqueSwipeBehavior, FxCommonBehavior) {

      static get is() {
        return 'page-about';
      }

      static get properties() {
        return {
          contactEmail: { type: String, value: 'public.ishafayet@gmail.com' }
        };
      }

      // region: core =================================

      constructor() {
        super();
        this.confirmPageReady()
      }

      onFirstNavigation() {
        super.onFirstNavigation();
        this.app.shouldShowSaveButton = false;
        this.app.currentPageIsModal = false;
        this.paperTabSelectedViewIndex = 0;
        baselib.delay(50, _ => {
          this.detectPageSwipe(this.$['wrapper'], (this.wrapperSwiped.bind(this)))
        });
      }

      onNextNavigation() {
        super.onNextNavigation();
        this.app.shouldShowSaveButton = false;
        this.app.currentPageIsModal = false;
        this.paperTabSelectedViewIndex = 0;
      }

      onNavigateIn() {
        this._ensureAccess();
      }

      onNavigateOut() {
        super.onNavigateOut();
      }

      _ensureAccess() {
        if (!this.app.user) {
          this.app.navigateTo('/login')
        }
      }

      // region: misc =================================      

      wrapperSwiped(direction) {
        if (direction === 'left') {
          if (this.paperTabSelectedViewIndex < 2) {
            this.paperTabSelectedViewIndex += 1;
          }
        } else if (direction === 'right') {
          if (this.paperTabSelectedViewIndex > 0) {
            this.paperTabSelectedViewIndex -= 1;
          }
        }
      }
    }

    window.customElements.define(PageAbout.is, PageAbout);
  </script>
</dom-module>