<link rel="import" href="../bower_components/polymer-fx/fx-http-behavior.html">
<script>
  (_ => {
    let { HttpRequestService, ServiceManager } = window.ServiceTree;

    if (!window.MyHttpBehavior) {
      /* @polymerMixin */
      window.MyHttpBehavior = (SuperClass) => class extends FxHttpBehavior(SuperClass) {

        constructor(...args) {
          super(...args);
        }

        _callAuthenticatedJsonPostApi(data, cbfn) {
          if ('user' in this && 'apiKey' in this.user) {
            data.apiKey = this.user.apiKey;
            this.callJsonPostApi('sync-data', data, cbfn);
          } else {
            this.showAlertMessage("No Api Key");
          }
        }

        callUserRegisterApi(data, cbfn) {
          this.callJsonPostApi('user-register', data, cbfn);
        }

        callUserLoginApi(data, cbfn) {
          this.callJsonPostApi('user-login', data, cbfn);
        }

      }
    }
  })();

</script>